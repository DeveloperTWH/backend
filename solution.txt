const updatedVariant = await ProductVariant.findOneAndUpdate(
  {
    _id: variantId,
    stock: { $gt: 0 }
  },
  {
    $inc: { stock: -1 }
  },
  { new: true }
);

if (!updatedVariant) {
  throw new Error("Out of stock");
}


const updatedOffer = await Offer.findOneAndUpdate(
  {
    _id: offerId,
    currentUsage: { $lt: offer.usageLimit }
  },
  {
    $inc: { currentUsage: 1 }
  },
  { new: true }
);

if (!updatedOffer) {
  throw new Error("Offer usage limit reached");
}

// If update succeeded, record redemption
await OfferRedemption.create({ offerId, userId });







have to devlope th corn job to delete the image in evry 10 mint have it but for now jump over it.





















mosaic-biz-hub Variant creation Route , Variant updation Route and Variant Deletion Route Configured, Developed Variant Creation API, Developed Variant Updation API, Developed Variant Deletion API, Postman Testing Under Process


------------------------ work add


Connected Minority Type Api with the frontend dropdown list in index page added Loading state,Developed And Build Minority Model, Developed Minority Type Creation Api, Developed minority Listing api for public (Only isActive type Visible), developed minority Updation APi, Developed Minority type Deletion api, 


Integrate resend Otp Module with frontend and Add coolDown Timer to get Rid off OTP Spamming .


today:

User Mangement Module:
Developed User Mangement Module, Developed Listing api (Admin percpctive), Developed User Updation api, Developed User Deletion api, developed api to block and unblock user from the platform.

FAQs Module
developed FAQ Updation Api, Developed FAQ Deletion api, Configured CMS Routes to Get FAQs from the db

testimonial Module
Developed testimonial model, Configured testimonial specific routes, Developed testimonial listing Api (Admin percepctive), Developed testimonial Creation api, developed testimonial Updation Api, Developed testimonial Deletion api, Configured CMS Routes to Get testimonial from the db


wishlist Module
Developed wishlist model, Configured wishlist specific routes, Developed wishlist listing Api (Only Authenticated Customer), Developed wishlist Creation api, Developed product removing api from the wishlist.



Blog Module:
Developed Blog Model, Configured Blog specific Routes, Developed Blog Listing Api (Admin percepctive), Developed Get Specific Blog Api (Admin percepctive), Developed Blog Listing Api (public percepctive), Developed Get Specific Blog Api (Public percepctive), Developed Blog Creation Api, Developed Blog Updation Api, Developed Blog Deletion Api, Developed Blog Feature/UnFeature Toggle Api, Developed Blog Publish/UnPublish Toggle Api




-------------------- TODO : ----------------------

1. Get Product
2. Product update



in Business There is no Social Category 