const updatedVariant = await ProductVariant.findOneAndUpdate(
  {
    _id: variantId,
    stock: { $gt: 0 }
  },
  {
    $inc: { stock: -1 }
  },
  { new: true }
);

if (!updatedVariant) {
  throw new Error("Out of stock");
}


const updatedOffer = await Offer.findOneAndUpdate(
  {
    _id: offerId,
    currentUsage: { $lt: offer.usageLimit }
  },
  {
    $inc: { currentUsage: 1 }
  },
  { new: true }
);

if (!updatedOffer) {
  throw new Error("Offer usage limit reached");
}

// If update succeeded, record redemption
await OfferRedemption.create({ offerId, userId });







have to devlope th corn job to delete the image in evry 10 mint have it but for now jump over it.





















mosaic-biz-hub Variant creation Route , Variant updation Route and Variant Deletion Route Configured, Developed Variant Creation API, Developed Variant Updation API, Developed Variant Deletion API, Postman Testing Under Process


------------------------ work add

1. Developed Service creation api, Developed Service Updation api, Developed Service Deletion api, Developed Service Listing Api, Configured routes for all of the above api, Tested All the Api's with the Postman


Connected Minority Type Api with the frontend dropdown list in index page added Loading state,Developed And Build Minority Model, Developed Minority Type Creation Api, Developed minority Listing api for public (Only isActive type Visible), developed minority Updation APi, Developed Minority type Deletion api, Postman Testing under Process


Integrated resend Otp Module with frontend.



-------------------- TODO : ----------------------

1. Get Product
2. Product update



in Business There is no Social Category 