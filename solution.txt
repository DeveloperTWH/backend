const updatedVariant = await ProductVariant.findOneAndUpdate(
  {
    _id: variantId,
    stock: { $gt: 0 }
  },
  {
    $inc: { stock: -1 }
  },
  { new: true }
);

if (!updatedVariant) {
  throw new Error("Out of stock");
}


const updatedOffer = await Offer.findOneAndUpdate(
  {
    _id: offerId,
    currentUsage: { $lt: offer.usageLimit }
  },
  {
    $inc: { currentUsage: 1 }
  },
  { new: true }
);

if (!updatedOffer) {
  throw new Error("Offer usage limit reached");
}

// If update succeeded, record redemption
await OfferRedemption.create({ offerId, userId });







have to devlope th corn job to delete the image in evry 10 mint have it but for now jump over it.





















mosaic-biz-hub Variant creation Route , Variant updation Route and Variant Deletion Route Configured, Developed Variant Creation API, Developed Variant Updation API, Developed Variant Deletion API, Postman Testing Under Process


------------------------ work add

1. developed Product Deletion and Variant associated with product Deletion api tested Variant Creation API, Variant Updation API, and Variant Deletion API in Postman




-------------------- TODO : ----------------------

1. Get Product
2. Product update
